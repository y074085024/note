# Character encoding

## ASCII

ASCII全称American Standard Code for Infomation Interchange,美国信息交换标准代码，使用7bit来表示一个字符，其中一位用作校验位，前0x20用来做控制字符，后边的编码用来表示26个大小写字母和标点符号等，一直编码到127。

## ISO-8859-1

后来计算机引进西欧，西欧国家还有其他的未编码字符，于是为了使计算机能够显示就使用了128\~255共128个codepoint(码位)来编码其他字符，这套字符集叫做ISO-8859-1，兼容前边的0\~127个codepoint，也就是ASCII。

## GB2312

与此同时中国也引入了计算机，但是中国的象形文字有几千个，使用1byte所能表示的信息量不够用来编码中国的汉字，所以中国使用更大的数字来编码汉字一开始使用1000 0000 1000 0000(0x7070)从此开始递增的codepoint来编码汉字，这套字符集叫做GB2312，兼容ASCII。

## GBK

后来因为一些生僻字不够表示，所以放开了后一个字节的小于128的编码，所以可以使用从1000 0000 0000 0000(0x7000)从此开始递增的codepoint来编码汉字，这套字符集叫做GBK，兼容GB2312。

## GB18030

再后来少数民族也有很多他们自己的文字符号，继续在GBK上扩充把剩余的未使用的codepoint进行编码，至此完整的包含中国全部汉字的编码集产生，即GB18030使用GB18030解码的方法是遇到小于128的直接按照ASCII码解码，大于128的则取两个字节按照GB18030字符集解码.

## Unicode

除了中国，其他国家和地区都有自己的文字，比如日本、韩国和中国的台湾等等，他们都自己制订一套适用于自己的编码集，如台湾使用Big5，这造成多个地区或国家信息交换的不方便，于是ISO组织决定重新编码一套包含地球上全部文字符号的编码集UCS(Universal Character Set),也叫Unicode，该编码集使用两个字节来表示一个字符，ASCII和ISO-8859-1的高位字节用0填充，汉字等其他象形文字重新编码，至此字符集统一。

## UTF-8

但是可以发现ASCII码用一个字节就可以表示的信息，现在使用unicode不得不使用两个字节来表示，对于英语文本的信息极大地浪费了存储空间和传输带框，所以出现了utf-8编码规则，把unicode字符集按数字大小分类，按照utf-8的规则编码，utf-8完全兼容ascii和iso-8859-1的编码规则，所以在使用以英文或西欧字符集的文本上极大地节省内存空间，但是utf-8表示汉字时使用3个字节，相比于GB18030多一个字节，所以在确定软件使用对象是使用汉字字符集的情况下使用GB18030是一种很好的选择。UTF-8编码字符时可能使用1~6个字节，另外对于UTF-16是最小使用两个字节表示字符，使用此编码是为了提高处理能力，英文字符浪费一倍空间，相当于空间换时间
UTF-32是为了扩展保留。

> 注：ASCII、ISO-8859-1、GB2312、GBK、GB18030、Unicode都叫做字符集，即使字符信息可以数字化表示的映射，比如1<->a  2<->b 3<->c等等，我们可以使用将1、2、3直接对应到计算机的字节中这种编码规则来使计算机能够存储、处理。因为ASCII字符集的编码规则就是使用数字的二进制直接映射到计算机字节中,假如ASCII中的c<->30000,那么肯定不能用1个字节来表示；一般的情况下编码规则是直接使用字符集对应的数字直接映射到计算机中的字节来处理字符，但是unicode如果直接像ASCII、ISO、GB18030这些字符集方式编码会存在浪费资源，所以unicode才出现了不同的编码规则如utf-8，如果把utf-8对应的字节理解成数字的话，那么相当于本来0xF1F1<->好,utf-8编码过后0xE18080<->好。因为unicode包罗万象，但是统一，统一就意味着处理方便，如果一味的考虑空间效率，可能使得处理方式变得纷繁复杂，那就是另一种极端了,所谓鱼和熊掌不可兼得，时间和空间需要根据具体的业务场景来权衡。

utf-8编码规则如下：第一个字节1个个数代表了后边多少个字节组成一个字符编码

- 0xxxxxxx
- 110xxxxx 10xxxxxx
- 1110xxxx 10xxxxxx 10xxxxxx
- 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
- 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
- 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
